<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <title>Survey</title>
</head>
<body>
    <div class="row">
    <div class="col-lg-12">
    <!-- Survey Page -->
    <div class="card">
    <div class="card-header">
        <h2>Survey Questions </h2>
    </div>
​
    <div class="card-body">
        <p class="lead">About You</p>
        <p>Name (Required)</p>
        <input type="text" class="form-control mb-3" name="name" id="name" placeholder="name" required>
        <p>Link to Photo (Required)</p>
        <input type="text" class="form-control mb-4" name="photo" id="photo" placeholder="link to photo" required>
        <p class="lead mb-1 "><strong>Question1</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select mb-4" id="q1">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
        <p class="lead mb-1 "><strong>Question2</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select" id="q2">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
        <p class="lead mb-1 "><strong>Question3</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select mb-4" id="q3">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
        <p class="lead mb-1 "><strong>Question4</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select mb-4" id="q4">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
        <p class="lead mb-1 "><strong>Question5</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select mb-4" id="q5">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
        <p class="lead mb-1 "><strong>Question6</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select mb-4" id="q6">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
        <p class="lead mb-1 "><strong>Question7</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select mb-4" id="q7">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
        <p class="lead mb-1 "><strong>Question8</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select mb-4" id="q8">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
        <p class="lead mb-1 "><strong>Question9</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select mb-4" id="q9">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
        <p class="lead mb-1 "><strong>Question10</strong></p>
        <p class="lead ">I am afraid of spiders or snakes.</p>
            <select class="answer-select mb-2" id="q10">
                <option value=''></option>
                <option value='1'>1 (Strongly Disagree)</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5 (Strongly Agree)</option>
            </select>
​
        <button type="submit" id="submit" class="btn btn-primary submit d-block my-3">Submit</button>
        </form>
    </div>
    </div>
    </div>
    </div>
    <div id="resultsModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">
                &times;
              </button>
              <h4 class="modal-title">Best Match</h4>
            </div>
  
            <div class="modal-body">
              <h2 id="name"></h2>
              <img id="picture" src="" style="width: 350px;"/>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
</body>

 <Script>
    
    // const closestFriend = require("../public/routing/apiroutes")
    const modal = function (res) {
        document.getElementById("modalName").innerHTML = res.name;
        document.getElementById("modalPhoto").setAttribute("src", res.photo);
        document.getElementById("modal").style.display = "block";
        document.getElementById("closeBtn").addEventListener("click", function () {
            document.getElementById("modal").style.display = "none";
        })
    }
    document.getElementById("button").addEventListener("click", function () {
        event.preventDefault();
        if (document.getElementById("nameInput").value === "" ||
            document.getElementById("photoInput").value === "" ||
            document.getElementById("question1").value === "" ||
            document.getElementById("question1").value === "" ||
            document.getElementById("question1").value === "" ||
            document.getElementById("question1").value === "" ||
            document.getElementById("question1").value === "" ||
            document.getElementById("question1").value === "" ||
            document.getElementById("question1").value === "" ||
            document.getElementById("question1").value === "" ||
            document.getElementById("question1").value === "" ||
            document.getElementById("question1").value === "") {
            alert("all forms must be filled");
            return false;
        }
        let newFriend = {
            name: document.getElementById("nameInput").value.trim(),
            photo: document.getElementById("photoInput").value.trim(),
            scores:
                [
                    parseInt(document.getElementById("question1").value.trim()),
                    parseInt(document.getElementById("question2").value.trim()),
                    parseInt(document.getElementById("question3").value.trim()),
                    parseInt(document.getElementById("question4").value.trim()),
                    parseInt(document.getElementById("question5").value.trim()),
                    parseInt(document.getElementById("question6").value.trim()),
                    parseInt(document.getElementById("question7").value.trim()),
                    parseInt(document.getElementById("question8").value.trim()),
                    parseInt(document.getElementById("question9").value.trim()),
                    parseInt(document.getElementById("question10").value.trim())
                ]
        }
        fetch("/api/friends", {
            method: "POST",
            body: JSON.stringify(newFriend),
            headers: { "Content-Type": "application/json" },
        })
            .then((res) => res.json())
            .then(function (res) {
                modal(res);
            });
    })


      </script>

  </html>